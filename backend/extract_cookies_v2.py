#!/usr/bin/env python3
"""
Ø§Ø³ØªØ®Ø±Ø§Ø¬ cookies Ù…Ù† Edge/Chrome Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… pycookiecheat
"""
import sys
import os

def extract_from_edge():
    try:
        from pycookiecheat import chrome_cookies
        
        print("ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ cookies Ù…Ù† Edge...")
        
        # Ù…Ø³Ø§Ø± Edge cookies
        cookie_file = os.path.expanduser(
            r'~\AppData\Local\Microsoft\Edge\User Data\Default\Network\Cookies'
        )
        
        if not os.path.exists(cookie_file):
            print(f"âŒ Ù…Ù„Ù cookies ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯: {cookie_file}")
            return None
        
        # Ø§Ø³ØªØ®Ø±Ø§Ø¬ cookies Ù„Ù€ twitter.com
        cookies = chrome_cookies('https://twitter.com', cookie_file=cookie_file)
        
        if cookies:
            print(f"âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ {len(cookies)} cookie Ù…Ù† Edge")
            return cookies
        else:
            print("âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ cookies Ù„Ù€ Twitter/X")
            return None
            
    except Exception as e:
        print(f"âŒ Ø®Ø·Ø£ ÙÙŠ Edge: {e}")
        return None

def save_cookies_netscape(cookies, filename='cookies.txt'):
    """Ø­ÙØ¸ Ø§Ù„Ù€ cookies Ø¨ØµÙŠØºØ© Netscape"""
    try:
        with open(filename, 'w') as f:
            f.write("# Netscape HTTP Cookie File\n")
            f.write("# This file was generated by extract_cookies_v2.py\n\n")
            
            for name, value in cookies.items():
                # ØµÙŠØºØ© Netscape: domain, flag, path, secure, expiration, name, value
                f.write(f".twitter.com\tTRUE\t/\tTRUE\t2147483647\t{name}\t{value}\n")
                f.write(f".x.com\tTRUE\t/\tTRUE\t2147483647\t{name}\t{value}\n")
        
        print(f"ğŸ’¾ ØªÙ… Ø­ÙØ¸ {len(cookies)} cookie ÙÙŠ: {filename}")
        return True
    except Exception as e:
        print(f"âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: {e}")
        return False

def main():
    cookies = extract_from_edge()
    
    if cookies:
        if save_cookies_netscape(cookies):
            print("âœ… ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!")
            return 0
    
    print("\nğŸ’¡ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙ†Ø¬Ø­ØŒ Ø¬Ø±Ø¨:")
    print("1. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Twitter/X ÙÙŠ Edge")
    print("2. Ø£ØºÙ„Ù‚ Edge ØªÙ…Ø§Ù…Ø§Ù‹")
    print("3. Ø´ØºÙ„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")
    
    return 1

if __name__ == '__main__':
    sys.exit(main())
