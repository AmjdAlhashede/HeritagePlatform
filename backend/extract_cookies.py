#!/usr/bin/env python3
"""
Ø§Ø³ØªØ®Ø±Ø§Ø¬ cookies Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ Ù„Ù€ Twitter/X
"""
import browser_cookie3
import sys

def extract_cookies():
    try:
        print("ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ cookies Ù…Ù† Edge...")
        
        # Ù…Ø­Ø§ÙˆÙ„Ø© Edge Ø£ÙˆÙ„Ø§Ù‹
        try:
            cookies = browser_cookie3.edge(domain_name='twitter.com')
            cookie_list = list(cookies)
            if cookie_list:
                print(f"âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ {len(cookie_list)} cookie Ù…Ù† Edge")
                save_cookies(cookie_list, 'cookies.txt')
                return True
        except Exception as e:
            print(f"âš ï¸ ÙØ´Ù„ Edge: {e}")
        
        # Ù…Ø­Ø§ÙˆÙ„Ø© Chrome
        try:
            cookies = browser_cookie3.chrome(domain_name='twitter.com')
            cookie_list = list(cookies)
            if cookie_list:
                print(f"âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ {len(cookie_list)} cookie Ù…Ù† Chrome")
                save_cookies(cookie_list, 'cookies.txt')
                return True
        except Exception as e:
            print(f"âš ï¸ ÙØ´Ù„ Chrome: {e}")
        
        # Ù…Ø­Ø§ÙˆÙ„Ø© Firefox
        try:
            cookies = browser_cookie3.firefox(domain_name='twitter.com')
            cookie_list = list(cookies)
            if cookie_list:
                print(f"âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ {len(cookie_list)} cookie Ù…Ù† Firefox")
                save_cookies(cookie_list, 'cookies.txt')
                return True
        except Exception as e:
            print(f"âš ï¸ ÙØ´Ù„ Firefox: {e}")
        
        print("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ cookies ÙÙŠ Ø£ÙŠ Ù…ØªØµÙØ­")
        print("ğŸ’¡ ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Twitter/X ÙÙŠ Ù…ØªØµÙØ­Ùƒ")
        return False
        
    except Exception as e:
        print(f"âŒ Ø®Ø·Ø£: {e}")
        return False

def save_cookies(cookies, filename):
    """Ø­ÙØ¸ Ø§Ù„Ù€ cookies Ø¨ØµÙŠØºØ© Netscape"""
    with open(filename, 'w') as f:
        f.write("# Netscape HTTP Cookie File\n")
        f.write("# This file was generated by extract_cookies.py\n")
        f.write("# Edit at your own risk.\n\n")
        
        for cookie in cookies:
            domain = cookie.domain
            flag = 'TRUE' if domain.startswith('.') else 'FALSE'
            path = cookie.path
            secure = 'TRUE' if cookie.secure else 'FALSE'
            expiration = str(int(cookie.expires)) if cookie.expires else '0'
            name = cookie.name
            value = cookie.value
            
            f.write(f"{domain}\t{flag}\t{path}\t{secure}\t{expiration}\t{name}\t{value}\n")
    
    print(f"ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù: {filename}")

if __name__ == '__main__':
    success = extract_cookies()
    sys.exit(0 if success else 1)
